name: Deploy (backoffice-app)

on:
  workflow_dispatch: {}

# jobs:
#   deploy_workspace_to_azure:
#     name: Deploy
#     uses: pagopa/io-std/.github/workflows/deploy-workspace.yaml@main
#     with:
#       environment: io-p-sign-backoffice-app
#       workspace-name: io-sign-backoffice-app
#     secrets: inherit

jobs:
  deploy:
    name: Deploy
    uses: pagopa/dx/.github/workflows/function_app_deploy.yaml@main
    secrets: inherit
    with:
      workspace_name: io-sign-backoffice-app
      environment: webapp-prod-cd
      resource_group_name: io-p-sign-backend-rg # ${{ vars.AZURE_WEB_APP_RESOURCE_GROUP }}
      function_app_name: io-p-sign-backoffice-app # ${{ vars.AZURE_WEB_APP_NAME }}
      health_check_path: /health # ${{ vars.HEALTH_CHECK_PATH }}
      use_staging_slot: true